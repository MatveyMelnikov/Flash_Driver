ARM GAS  /tmp/ccC9jseZ.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"flash_driver.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "External/flash_driver/Src/flash_driver.c"
  18              		.section	.text.flash_driver_write_enable,"ax",%progbits
  19              		.align	1
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	flash_driver_write_enable:
  25              	.LFB2:
   1:External/flash_driver/Src/flash_driver.c **** #include "flash_driver.h"
   2:External/flash_driver/Src/flash_driver.c **** #include "flash_driver_io.h"
   3:External/flash_driver/Src/flash_driver.c **** #include <memory.h>
   4:External/flash_driver/Src/flash_driver.c **** #include <stdlib.h>
   5:External/flash_driver/Src/flash_driver.c **** 
   6:External/flash_driver/Src/flash_driver.c **** // Defines -------------------------------------------------------------------
   7:External/flash_driver/Src/flash_driver.c **** 
   8:External/flash_driver/Src/flash_driver.c **** // Static functions ----------------------------------------------------------
   9:External/flash_driver/Src/flash_driver.c **** 
  10:External/flash_driver/Src/flash_driver.c **** __attribute__((always_inline))
  11:External/flash_driver/Src/flash_driver.c **** inline static uint32_t flash_driver_reverse_addr(const uint32_t address)
  12:External/flash_driver/Src/flash_driver.c **** {
  13:External/flash_driver/Src/flash_driver.c ****   uint32_t result = address << 16;
  14:External/flash_driver/Src/flash_driver.c ****   result |= address & 0xff00;
  15:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
  16:External/flash_driver/Src/flash_driver.c **** 
  17:External/flash_driver/Src/flash_driver.c ****   return result;
  18:External/flash_driver/Src/flash_driver.c **** }
  19:External/flash_driver/Src/flash_driver.c **** 
  20:External/flash_driver/Src/flash_driver.c **** __attribute__((always_inline))
  21:External/flash_driver/Src/flash_driver.c **** inline static uint32_t flash_driver_is_write_args_wrong(
  22:External/flash_driver/Src/flash_driver.c ****   const uint32_t address,
  23:External/flash_driver/Src/flash_driver.c ****   const uint16_t data_size
  24:External/flash_driver/Src/flash_driver.c **** )
  25:External/flash_driver/Src/flash_driver.c **** {
  26:External/flash_driver/Src/flash_driver.c ****   return address >= FLASH_DRIVER_SIZE || data_size > FLASH_DRIVER_PAGE_SIZE ||
  27:External/flash_driver/Src/flash_driver.c ****     (address + data_size) > FLASH_DRIVER_SIZE;
  28:External/flash_driver/Src/flash_driver.c **** }
  29:External/flash_driver/Src/flash_driver.c **** 
  30:External/flash_driver/Src/flash_driver.c **** // The Write Enable instruction sets the Write Enable Latch bit
  31:External/flash_driver/Src/flash_driver.c **** // The WEL bit must be set prior to every Program and Erase command.
  32:External/flash_driver/Src/flash_driver.c **** // Winbond W25Q128JV datasheet (pg. 24)
  33:External/flash_driver/Src/flash_driver.c **** static flash_driver_status flash_driver_write_enable()
ARM GAS  /tmp/ccC9jseZ.s 			page 2


  34:External/flash_driver/Src/flash_driver.c **** {
  26              		.loc 1 34 1 view -0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 8
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30 0000 10B5     		push	{r4, lr}
  31              	.LCFI0:
  32              		.cfi_def_cfa_offset 8
  33              		.cfi_offset 4, -8
  34              		.cfi_offset 14, -4
  35 0002 82B0     		sub	sp, sp, #8
  36              	.LCFI1:
  37              		.cfi_def_cfa_offset 16
  35:External/flash_driver/Src/flash_driver.c ****   uint8_t output_data = FLASH_DRIVER_WRITE_ENABLE_CMD;
  38              		.loc 1 35 3 view .LVU1
  39              		.loc 1 35 11 is_stmt 0 view .LVU2
  40 0004 0623     		movs	r3, #6
  41 0006 8DF80730 		strb	r3, [sp, #7]
  36:External/flash_driver/Src/flash_driver.c **** 
  37:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(true);
  42              		.loc 1 37 3 is_stmt 1 view .LVU3
  43 000a 0120     		movs	r0, #1
  44 000c FFF7FEFF 		bl	flash_driver_select
  45              	.LVL0:
  38:External/flash_driver/Src/flash_driver.c ****   flash_driver_status status = flash_driver_io_write(
  46              		.loc 1 38 3 view .LVU4
  47              		.loc 1 38 32 is_stmt 0 view .LVU5
  48 0010 0121     		movs	r1, #1
  49 0012 0DF10700 		add	r0, sp, #7
  50 0016 FFF7FEFF 		bl	flash_driver_io_write
  51              	.LVL1:
  52 001a 0446     		mov	r4, r0
  53              	.LVL2:
  39:External/flash_driver/Src/flash_driver.c ****     &output_data, sizeof(uint8_t)
  40:External/flash_driver/Src/flash_driver.c ****   );
  41:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(false);
  54              		.loc 1 41 3 is_stmt 1 view .LVU6
  55 001c 0020     		movs	r0, #0
  56 001e FFF7FEFF 		bl	flash_driver_select
  57              	.LVL3:
  42:External/flash_driver/Src/flash_driver.c **** 
  43:External/flash_driver/Src/flash_driver.c ****   return status;
  58              		.loc 1 43 3 view .LVU7
  44:External/flash_driver/Src/flash_driver.c **** }
  59              		.loc 1 44 1 is_stmt 0 view .LVU8
  60 0022 2046     		mov	r0, r4
  61 0024 02B0     		add	sp, sp, #8
  62              	.LCFI2:
  63              		.cfi_def_cfa_offset 8
  64              		@ sp needed
  65 0026 10BD     		pop	{r4, pc}
  66              		.loc 1 44 1 view .LVU9
  67              		.cfi_endproc
  68              	.LFE2:
  70              		.section	.text.flash_driver_is_busy,"ax",%progbits
  71              		.align	1
  72              		.global	flash_driver_is_busy
ARM GAS  /tmp/ccC9jseZ.s 			page 3


  73              		.syntax unified
  74              		.thumb
  75              		.thumb_func
  77              	flash_driver_is_busy:
  78              	.LFB3:
  45:External/flash_driver/Src/flash_driver.c **** 
  46:External/flash_driver/Src/flash_driver.c **** // Implementations -----------------------------------------------------------
  47:External/flash_driver/Src/flash_driver.c **** 
  48:External/flash_driver/Src/flash_driver.c **** flash_driver_status flash_driver_is_busy()
  49:External/flash_driver/Src/flash_driver.c **** {
  79              		.loc 1 49 1 is_stmt 1 view -0
  80              		.cfi_startproc
  81              		@ args = 0, pretend = 0, frame = 8
  82              		@ frame_needed = 0, uses_anonymous_args = 0
  83 0000 10B5     		push	{r4, lr}
  84              	.LCFI3:
  85              		.cfi_def_cfa_offset 8
  86              		.cfi_offset 4, -8
  87              		.cfi_offset 14, -4
  88 0002 82B0     		sub	sp, sp, #8
  89              	.LCFI4:
  90              		.cfi_def_cfa_offset 16
  50:External/flash_driver/Src/flash_driver.c ****   uint8_t output_data[2] = {
  91              		.loc 1 50 3 view .LVU11
  92              		.loc 1 50 11 is_stmt 0 view .LVU12
  93 0004 0523     		movs	r3, #5
  94 0006 ADF80430 		strh	r3, [sp, #4]	@ movhi
  51:External/flash_driver/Src/flash_driver.c ****     FLASH_DRIVER_GET_STATUS_1_CMD,
  52:External/flash_driver/Src/flash_driver.c ****     FLASH_DRIVER_DUMMY_BYTE
  53:External/flash_driver/Src/flash_driver.c ****   };
  54:External/flash_driver/Src/flash_driver.c ****   uint8_t input_data[2];
  95              		.loc 1 54 3 is_stmt 1 view .LVU13
  55:External/flash_driver/Src/flash_driver.c **** 
  56:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(true);
  96              		.loc 1 56 3 view .LVU14
  97 000a 0120     		movs	r0, #1
  98 000c FFF7FEFF 		bl	flash_driver_select
  99              	.LVL4:
  57:External/flash_driver/Src/flash_driver.c ****   flash_driver_status status = flash_driver_io_write_read(
 100              		.loc 1 57 3 view .LVU15
 101              		.loc 1 57 32 is_stmt 0 view .LVU16
 102 0010 0222     		movs	r2, #2
 103 0012 6946     		mov	r1, sp
 104 0014 01A8     		add	r0, sp, #4
 105 0016 FFF7FEFF 		bl	flash_driver_io_write_read
 106              	.LVL5:
 107 001a 0446     		mov	r4, r0
 108              	.LVL6:
  58:External/flash_driver/Src/flash_driver.c ****     output_data, input_data, sizeof(output_data)
  59:External/flash_driver/Src/flash_driver.c ****   );
  60:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(false);
 109              		.loc 1 60 3 is_stmt 1 view .LVU17
 110 001c 0020     		movs	r0, #0
 111 001e FFF7FEFF 		bl	flash_driver_select
 112              	.LVL7:
  61:External/flash_driver/Src/flash_driver.c **** 
  62:External/flash_driver/Src/flash_driver.c ****   if (status)
ARM GAS  /tmp/ccC9jseZ.s 			page 4


 113              		.loc 1 62 3 view .LVU18
 114              		.loc 1 62 6 is_stmt 0 view .LVU19
 115 0022 24B9     		cbnz	r4, .L4
  63:External/flash_driver/Src/flash_driver.c ****     return status;
  64:External/flash_driver/Src/flash_driver.c ****   
  65:External/flash_driver/Src/flash_driver.c ****   return input_data[1] & FLASH_DRIVER_BUSY_BIT ?
 116              		.loc 1 65 3 is_stmt 1 view .LVU20
 117              		.loc 1 65 20 is_stmt 0 view .LVU21
 118 0024 9DF80140 		ldrb	r4, [sp, #1]	@ zero_extendqisi2
 119              	.LVL8:
  66:External/flash_driver/Src/flash_driver.c ****     FLASH_DRIVER_BUSY : FLASH_DRIVER_OK;
 120              		.loc 1 66 23 view .LVU22
 121 0028 6400     		lsls	r4, r4, #1
 122 002a 04F00204 		and	r4, r4, #2
 123              	.L4:
  67:External/flash_driver/Src/flash_driver.c **** }
 124              		.loc 1 67 1 view .LVU23
 125 002e 2046     		mov	r0, r4
 126 0030 02B0     		add	sp, sp, #8
 127              	.LCFI5:
 128              		.cfi_def_cfa_offset 8
 129              		@ sp needed
 130 0032 10BD     		pop	{r4, pc}
 131              		.cfi_endproc
 132              	.LFE3:
 134              		.section	.text.flash_driver_check_link,"ax",%progbits
 135              		.align	1
 136              		.global	flash_driver_check_link
 137              		.syntax unified
 138              		.thumb
 139              		.thumb_func
 141              	flash_driver_check_link:
 142              	.LFB4:
  68:External/flash_driver/Src/flash_driver.c **** 
  69:External/flash_driver/Src/flash_driver.c **** // Winbond W25Q128JV datasheet (pg. 23) - Manufacturer/Device ID cmd = 90h
  70:External/flash_driver/Src/flash_driver.c **** flash_driver_status flash_driver_check_link()
  71:External/flash_driver/Src/flash_driver.c **** {
 143              		.loc 1 71 1 is_stmt 1 view -0
 144              		.cfi_startproc
 145              		@ args = 0, pretend = 0, frame = 16
 146              		@ frame_needed = 0, uses_anonymous_args = 0
 147 0000 10B5     		push	{r4, lr}
 148              	.LCFI6:
 149              		.cfi_def_cfa_offset 8
 150              		.cfi_offset 4, -8
 151              		.cfi_offset 14, -4
 152 0002 84B0     		sub	sp, sp, #16
 153              	.LCFI7:
 154              		.cfi_def_cfa_offset 24
  72:External/flash_driver/Src/flash_driver.c ****   uint8_t output_data[6] = {
 155              		.loc 1 72 3 view .LVU25
 156              		.loc 1 72 11 is_stmt 0 view .LVU26
 157 0004 9023     		movs	r3, #144
 158 0006 0293     		str	r3, [sp, #8]
 159 0008 0023     		movs	r3, #0
 160 000a ADF80C30 		strh	r3, [sp, #12]	@ movhi
  73:External/flash_driver/Src/flash_driver.c ****     FLASH_DRIVER_ID_CMD,
ARM GAS  /tmp/ccC9jseZ.s 			page 5


  74:External/flash_driver/Src/flash_driver.c ****     FLASH_DRIVER_DUMMY_BYTE,
  75:External/flash_driver/Src/flash_driver.c ****     FLASH_DRIVER_DUMMY_BYTE,
  76:External/flash_driver/Src/flash_driver.c ****     0x0,
  77:External/flash_driver/Src/flash_driver.c ****     FLASH_DRIVER_DUMMY_BYTE,
  78:External/flash_driver/Src/flash_driver.c ****     FLASH_DRIVER_DUMMY_BYTE
  79:External/flash_driver/Src/flash_driver.c ****   };
  80:External/flash_driver/Src/flash_driver.c ****   uint8_t input_data[6];
 161              		.loc 1 80 3 is_stmt 1 view .LVU27
  81:External/flash_driver/Src/flash_driver.c **** 
  82:External/flash_driver/Src/flash_driver.c **** 
  83:External/flash_driver/Src/flash_driver.c ****   flash_driver_status status = flash_driver_is_busy();
 162              		.loc 1 83 3 view .LVU28
 163              		.loc 1 83 32 is_stmt 0 view .LVU29
 164 000e FFF7FEFF 		bl	flash_driver_is_busy
 165              	.LVL9:
  84:External/flash_driver/Src/flash_driver.c ****   if (status)
 166              		.loc 1 84 3 is_stmt 1 view .LVU30
 167              		.loc 1 84 6 is_stmt 0 view .LVU31
 168 0012 0446     		mov	r4, r0
 169 0014 10B1     		cbz	r0, .L10
 170              	.LVL10:
 171              	.L7:
  85:External/flash_driver/Src/flash_driver.c ****     return status;
  86:External/flash_driver/Src/flash_driver.c ****   
  87:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(true);
  88:External/flash_driver/Src/flash_driver.c ****   status = flash_driver_io_write_read(
  89:External/flash_driver/Src/flash_driver.c ****     output_data, input_data, sizeof(output_data)
  90:External/flash_driver/Src/flash_driver.c ****   );
  91:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(false);
  92:External/flash_driver/Src/flash_driver.c **** 
  93:External/flash_driver/Src/flash_driver.c ****   if (status)
  94:External/flash_driver/Src/flash_driver.c ****     return status;
  95:External/flash_driver/Src/flash_driver.c ****   if (input_data[4] == FLASH_DRIVER_MANUFACTURER_ID &&
  96:External/flash_driver/Src/flash_driver.c ****     input_data[5] == FLASH_DRIVER_DEVICE_ID)
  97:External/flash_driver/Src/flash_driver.c ****     return FLASH_DRIVER_OK;
  98:External/flash_driver/Src/flash_driver.c ****   else
  99:External/flash_driver/Src/flash_driver.c ****     return FLASH_DRIVER_ERROR;
 100:External/flash_driver/Src/flash_driver.c **** }
 172              		.loc 1 100 1 view .LVU32
 173 0016 2046     		mov	r0, r4
 174 0018 04B0     		add	sp, sp, #16
 175              	.LCFI8:
 176              		.cfi_remember_state
 177              		.cfi_def_cfa_offset 8
 178              		@ sp needed
 179 001a 10BD     		pop	{r4, pc}
 180              	.LVL11:
 181              	.L10:
 182              	.LCFI9:
 183              		.cfi_restore_state
  87:External/flash_driver/Src/flash_driver.c ****   status = flash_driver_io_write_read(
 184              		.loc 1 87 3 is_stmt 1 view .LVU33
 185 001c 0120     		movs	r0, #1
 186              	.LVL12:
  87:External/flash_driver/Src/flash_driver.c ****   status = flash_driver_io_write_read(
 187              		.loc 1 87 3 is_stmt 0 view .LVU34
 188 001e FFF7FEFF 		bl	flash_driver_select
ARM GAS  /tmp/ccC9jseZ.s 			page 6


 189              	.LVL13:
  88:External/flash_driver/Src/flash_driver.c ****     output_data, input_data, sizeof(output_data)
 190              		.loc 1 88 3 is_stmt 1 view .LVU35
  88:External/flash_driver/Src/flash_driver.c ****     output_data, input_data, sizeof(output_data)
 191              		.loc 1 88 12 is_stmt 0 view .LVU36
 192 0022 0622     		movs	r2, #6
 193 0024 6946     		mov	r1, sp
 194 0026 02A8     		add	r0, sp, #8
 195 0028 FFF7FEFF 		bl	flash_driver_io_write_read
 196              	.LVL14:
 197 002c 0446     		mov	r4, r0
 198              	.LVL15:
  91:External/flash_driver/Src/flash_driver.c **** 
 199              		.loc 1 91 3 is_stmt 1 view .LVU37
 200 002e 0020     		movs	r0, #0
 201 0030 FFF7FEFF 		bl	flash_driver_select
 202              	.LVL16:
  93:External/flash_driver/Src/flash_driver.c ****     return status;
 203              		.loc 1 93 3 view .LVU38
  93:External/flash_driver/Src/flash_driver.c ****     return status;
 204              		.loc 1 93 6 is_stmt 0 view .LVU39
 205 0034 002C     		cmp	r4, #0
 206 0036 EED1     		bne	.L7
  95:External/flash_driver/Src/flash_driver.c ****     input_data[5] == FLASH_DRIVER_DEVICE_ID)
 207              		.loc 1 95 3 is_stmt 1 view .LVU40
  95:External/flash_driver/Src/flash_driver.c ****     input_data[5] == FLASH_DRIVER_DEVICE_ID)
 208              		.loc 1 95 17 is_stmt 0 view .LVU41
 209 0038 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
  95:External/flash_driver/Src/flash_driver.c ****     input_data[5] == FLASH_DRIVER_DEVICE_ID)
 210              		.loc 1 95 6 view .LVU42
 211 003c EF2B     		cmp	r3, #239
 212 003e 05D1     		bne	.L8
  96:External/flash_driver/Src/flash_driver.c ****     return FLASH_DRIVER_OK;
 213              		.loc 1 96 15 view .LVU43
 214 0040 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
  95:External/flash_driver/Src/flash_driver.c ****     input_data[5] == FLASH_DRIVER_DEVICE_ID)
 215              		.loc 1 95 53 discriminator 1 view .LVU44
 216 0044 172B     		cmp	r3, #23
 217 0046 E6D0     		beq	.L7
  99:External/flash_driver/Src/flash_driver.c **** }
 218              		.loc 1 99 12 view .LVU45
 219 0048 0124     		movs	r4, #1
 220              	.LVL17:
  99:External/flash_driver/Src/flash_driver.c **** }
 221              		.loc 1 99 12 view .LVU46
 222 004a E4E7     		b	.L7
 223              	.LVL18:
 224              	.L8:
  99:External/flash_driver/Src/flash_driver.c **** }
 225              		.loc 1 99 12 view .LVU47
 226 004c 0124     		movs	r4, #1
 227              	.LVL19:
  99:External/flash_driver/Src/flash_driver.c **** }
 228              		.loc 1 99 12 view .LVU48
 229 004e E2E7     		b	.L7
 230              		.cfi_endproc
 231              	.LFE4:
ARM GAS  /tmp/ccC9jseZ.s 			page 7


 233              		.section	.text.flash_driver_write,"ax",%progbits
 234              		.align	1
 235              		.global	flash_driver_write
 236              		.syntax unified
 237              		.thumb
 238              		.thumb_func
 240              	flash_driver_write:
 241              	.LVL20:
 242              	.LFB5:
 101:External/flash_driver/Src/flash_driver.c **** 
 102:External/flash_driver/Src/flash_driver.c **** // The Page Program instruction allows from one byte to 256 bytes (a page)
 103:External/flash_driver/Src/flash_driver.c **** // of data to be programmed at previously erased (FFh) memory locations.
 104:External/flash_driver/Src/flash_driver.c **** // Winbond W25Q128JV datasheet (pg. 36)
 105:External/flash_driver/Src/flash_driver.c **** flash_driver_status flash_driver_write(
 106:External/flash_driver/Src/flash_driver.c ****   const uint32_t address,
 107:External/flash_driver/Src/flash_driver.c ****   const uint8_t *const data,
 108:External/flash_driver/Src/flash_driver.c ****   const uint16_t data_size
 109:External/flash_driver/Src/flash_driver.c **** )
 110:External/flash_driver/Src/flash_driver.c **** {
 243              		.loc 1 110 1 is_stmt 1 view -0
 244              		.cfi_startproc
 245              		@ args = 0, pretend = 0, frame = 8
 246              		@ frame_needed = 0, uses_anonymous_args = 0
 247              		.loc 1 110 1 is_stmt 0 view .LVU50
 248 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 249              	.LCFI10:
 250              		.cfi_def_cfa_offset 24
 251              		.cfi_offset 4, -24
 252              		.cfi_offset 5, -20
 253              		.cfi_offset 6, -16
 254              		.cfi_offset 7, -12
 255              		.cfi_offset 8, -8
 256              		.cfi_offset 14, -4
 257 0004 82B0     		sub	sp, sp, #8
 258              	.LCFI11:
 259              		.cfi_def_cfa_offset 32
 111:External/flash_driver/Src/flash_driver.c ****   if (data_size == 0 || flash_driver_is_write_args_wrong(address, data_size))
 260              		.loc 1 111 3 is_stmt 1 view .LVU51
 261              		.loc 1 111 6 is_stmt 0 view .LVU52
 262 0006 002A     		cmp	r2, #0
 263 0008 41D0     		beq	.L13
 264 000a 0446     		mov	r4, r0
 265 000c 0D46     		mov	r5, r1
 266 000e 1746     		mov	r7, r2
 267              	.LVL21:
 268              	.LBB10:
 269              	.LBI10:
  21:External/flash_driver/Src/flash_driver.c ****   const uint32_t address,
 270              		.loc 1 21 24 is_stmt 1 view .LVU53
 271              	.LBB11:
  26:External/flash_driver/Src/flash_driver.c ****     (address + data_size) > FLASH_DRIVER_SIZE;
 272              		.loc 1 26 3 view .LVU54
  26:External/flash_driver/Src/flash_driver.c ****     (address + data_size) > FLASH_DRIVER_SIZE;
 273              		.loc 1 26 77 is_stmt 0 view .LVU55
 274 0010 B0F1807F 		cmp	r0, #16777216
 275 0014 3DD2     		bcs	.L14
  26:External/flash_driver/Src/flash_driver.c ****     (address + data_size) > FLASH_DRIVER_SIZE;
ARM GAS  /tmp/ccC9jseZ.s 			page 8


 276              		.loc 1 26 39 discriminator 2 view .LVU56
 277 0016 B2F5807F 		cmp	r2, #256
 278 001a 3FD8     		bhi	.L15
  27:External/flash_driver/Src/flash_driver.c **** }
 279              		.loc 1 27 14 view .LVU57
 280 001c 8318     		adds	r3, r0, r2
  26:External/flash_driver/Src/flash_driver.c ****     (address + data_size) > FLASH_DRIVER_SIZE;
 281              		.loc 1 26 77 discriminator 4 view .LVU58
 282 001e B3F1807F 		cmp	r3, #16777216
 283 0022 3DD8     		bhi	.L16
 284              	.LVL22:
  26:External/flash_driver/Src/flash_driver.c ****     (address + data_size) > FLASH_DRIVER_SIZE;
 285              		.loc 1 26 77 discriminator 4 view .LVU59
 286              	.LBE11:
 287              	.LBE10:
 112:External/flash_driver/Src/flash_driver.c ****     return FLASH_DRIVER_INVALID_ARGS;
 113:External/flash_driver/Src/flash_driver.c **** 
 114:External/flash_driver/Src/flash_driver.c ****   flash_driver_status status = flash_driver_is_busy();
 288              		.loc 1 114 3 is_stmt 1 view .LVU60
 289              		.loc 1 114 32 is_stmt 0 view .LVU61
 290 0024 FFF7FEFF 		bl	flash_driver_is_busy
 291              	.LVL23:
 292              		.loc 1 114 32 view .LVU62
 293 0028 0646     		mov	r6, r0
 294              	.LVL24:
 115:External/flash_driver/Src/flash_driver.c ****   status |= flash_driver_write_enable();
 295              		.loc 1 115 3 is_stmt 1 view .LVU63
 296              		.loc 1 115 13 is_stmt 0 view .LVU64
 297 002a FFF7FEFF 		bl	flash_driver_write_enable
 298              	.LVL25:
 299              		.loc 1 115 10 discriminator 1 view .LVU65
 300 002e 0643     		orrs	r6, r6, r0
 301              	.LVL26:
 116:External/flash_driver/Src/flash_driver.c ****   if (status)
 302              		.loc 1 116 3 is_stmt 1 view .LVU66
 303              		.loc 1 116 6 is_stmt 0 view .LVU67
 304 0030 16F0FF06 		ands	r6, r6, #255
 305              	.LVL27:
 306              		.loc 1 116 6 view .LVU68
 307 0034 2ED1     		bne	.L12
 117:External/flash_driver/Src/flash_driver.c ****     return status;
 118:External/flash_driver/Src/flash_driver.c **** 
 119:External/flash_driver/Src/flash_driver.c ****   uint8_t *output_data = malloc(4 + data_size);
 308              		.loc 1 119 3 is_stmt 1 view .LVU69
 309              		.loc 1 119 35 is_stmt 0 view .LVU70
 310 0036 3E1D     		adds	r6, r7, #4
 311              		.loc 1 119 26 view .LVU71
 312 0038 3046     		mov	r0, r6
 313 003a FFF7FEFF 		bl	malloc
 314              	.LVL28:
 315 003e 8046     		mov	r8, r0
 316              	.LVL29:
 120:External/flash_driver/Src/flash_driver.c ****   uint32_t reversed_addr = flash_driver_reverse_addr(address);
 317              		.loc 1 120 3 is_stmt 1 view .LVU72
 318              	.LBB12:
 319              	.LBI12:
  11:External/flash_driver/Src/flash_driver.c **** {
ARM GAS  /tmp/ccC9jseZ.s 			page 9


 320              		.loc 1 11 24 view .LVU73
 321              	.LBB13:
  13:External/flash_driver/Src/flash_driver.c ****   result |= address & 0xff00;
 322              		.loc 1 13 3 view .LVU74
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 323              		.loc 1 14 3 view .LVU75
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 324              		.loc 1 14 21 is_stmt 0 view .LVU76
 325 0040 04F47F43 		and	r3, r4, #65280
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 326              		.loc 1 14 10 view .LVU77
 327 0044 43EA0443 		orr	r3, r3, r4, lsl #16
 328              	.LVL30:
  15:External/flash_driver/Src/flash_driver.c **** 
 329              		.loc 1 15 3 is_stmt 1 view .LVU78
  15:External/flash_driver/Src/flash_driver.c **** 
 330              		.loc 1 15 34 is_stmt 0 view .LVU79
 331 0048 C4F30744 		ubfx	r4, r4, #16, #8
 332              	.LVL31:
  15:External/flash_driver/Src/flash_driver.c **** 
 333              		.loc 1 15 10 view .LVU80
 334 004c 2343     		orrs	r3, r3, r4
 335              	.LVL32:
  17:External/flash_driver/Src/flash_driver.c **** }
 336              		.loc 1 17 3 is_stmt 1 view .LVU81
  17:External/flash_driver/Src/flash_driver.c **** }
 337              		.loc 1 17 3 is_stmt 0 view .LVU82
 338              	.LBE13:
 339              	.LBE12:
 340              		.loc 1 120 12 discriminator 1 view .LVU83
 341 004e 0193     		str	r3, [sp, #4]
 121:External/flash_driver/Src/flash_driver.c ****   output_data[0] = FLASH_DRIVER_PAGE_PROGRAM_CMD;
 342              		.loc 1 121 3 is_stmt 1 view .LVU84
 343              		.loc 1 121 18 is_stmt 0 view .LVU85
 344 0050 0346     		mov	r3, r0
 345 0052 0222     		movs	r2, #2
 346 0054 03F8012B 		strb	r2, [r3], #1
 122:External/flash_driver/Src/flash_driver.c ****   memcpy(output_data + 1, (uint8_t*)&reversed_addr, 3);
 347              		.loc 1 122 3 is_stmt 1 view .LVU86
 348 0058 BDF80410 		ldrh	r1, [sp, #4]	@ unaligned
 349 005c 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 350 0060 A0F80110 		strh	r1, [r0, #1]	@ unaligned
 351 0064 9A70     		strb	r2, [r3, #2]
 123:External/flash_driver/Src/flash_driver.c ****   memcpy(output_data + 4, data, data_size);
 352              		.loc 1 123 3 view .LVU87
 353 0066 3A46     		mov	r2, r7
 354 0068 2946     		mov	r1, r5
 355 006a 0430     		adds	r0, r0, #4
 356              	.LVL33:
 357              		.loc 1 123 3 is_stmt 0 view .LVU88
 358 006c FFF7FEFF 		bl	memcpy
 359              	.LVL34:
 124:External/flash_driver/Src/flash_driver.c **** 
 125:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(true);
 360              		.loc 1 125 3 is_stmt 1 view .LVU89
 361 0070 0120     		movs	r0, #1
 362 0072 FFF7FEFF 		bl	flash_driver_select
ARM GAS  /tmp/ccC9jseZ.s 			page 10


 363              	.LVL35:
 126:External/flash_driver/Src/flash_driver.c ****   status = flash_driver_io_write(
 364              		.loc 1 126 3 view .LVU90
 365              		.loc 1 126 12 is_stmt 0 view .LVU91
 366 0076 B1B2     		uxth	r1, r6
 367 0078 4046     		mov	r0, r8
 368 007a FFF7FEFF 		bl	flash_driver_io_write
 369              	.LVL36:
 370 007e 0646     		mov	r6, r0
 371              	.LVL37:
 127:External/flash_driver/Src/flash_driver.c ****     output_data, 4 + data_size
 128:External/flash_driver/Src/flash_driver.c ****   );
 129:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(false);
 372              		.loc 1 129 3 is_stmt 1 view .LVU92
 373 0080 0020     		movs	r0, #0
 374 0082 FFF7FEFF 		bl	flash_driver_select
 375              	.LVL38:
 130:External/flash_driver/Src/flash_driver.c **** 
 131:External/flash_driver/Src/flash_driver.c ****   free(output_data);
 376              		.loc 1 131 3 view .LVU93
 377 0086 4046     		mov	r0, r8
 378 0088 FFF7FEFF 		bl	free
 379              	.LVL39:
 132:External/flash_driver/Src/flash_driver.c **** 
 133:External/flash_driver/Src/flash_driver.c ****   return status;
 380              		.loc 1 133 3 view .LVU94
 381              		.loc 1 133 10 is_stmt 0 view .LVU95
 382 008c 02E0     		b	.L12
 383              	.LVL40:
 384              	.L13:
 112:External/flash_driver/Src/flash_driver.c **** 
 385              		.loc 1 112 12 view .LVU96
 386 008e 0526     		movs	r6, #5
 387 0090 00E0     		b	.L12
 388              	.LVL41:
 389              	.L14:
 112:External/flash_driver/Src/flash_driver.c **** 
 390              		.loc 1 112 12 view .LVU97
 391 0092 0526     		movs	r6, #5
 392              	.LVL42:
 393              	.L12:
 134:External/flash_driver/Src/flash_driver.c **** }
 394              		.loc 1 134 1 view .LVU98
 395 0094 3046     		mov	r0, r6
 396 0096 02B0     		add	sp, sp, #8
 397              	.LCFI12:
 398              		.cfi_remember_state
 399              		.cfi_def_cfa_offset 24
 400              		@ sp needed
 401 0098 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 402              	.LVL43:
 403              	.L15:
 404              	.LCFI13:
 405              		.cfi_restore_state
 112:External/flash_driver/Src/flash_driver.c **** 
 406              		.loc 1 112 12 view .LVU99
 407 009c 0526     		movs	r6, #5
ARM GAS  /tmp/ccC9jseZ.s 			page 11


 408 009e F9E7     		b	.L12
 409              	.L16:
 410 00a0 0526     		movs	r6, #5
 411 00a2 F7E7     		b	.L12
 412              		.cfi_endproc
 413              	.LFE5:
 415              		.section	.text.flash_driver_read,"ax",%progbits
 416              		.align	1
 417              		.global	flash_driver_read
 418              		.syntax unified
 419              		.thumb
 420              		.thumb_func
 422              	flash_driver_read:
 423              	.LVL44:
 424              	.LFB6:
 135:External/flash_driver/Src/flash_driver.c **** 
 136:External/flash_driver/Src/flash_driver.c **** // The Read Data instruction allows one or more data bytes to be sequentially
 137:External/flash_driver/Src/flash_driver.c **** // read from the memory. the entire memory can be accessed with a single 
 138:External/flash_driver/Src/flash_driver.c **** // instruction as long as the clock continues.
 139:External/flash_driver/Src/flash_driver.c **** // Winbond W25Q128JV datasheet (pg. 28)
 140:External/flash_driver/Src/flash_driver.c **** flash_driver_status flash_driver_read(
 141:External/flash_driver/Src/flash_driver.c ****   uint32_t address,
 142:External/flash_driver/Src/flash_driver.c ****   uint8_t *data,
 143:External/flash_driver/Src/flash_driver.c ****   uint16_t data_size
 144:External/flash_driver/Src/flash_driver.c **** )
 145:External/flash_driver/Src/flash_driver.c **** {
 425              		.loc 1 145 1 is_stmt 1 view -0
 426              		.cfi_startproc
 427              		@ args = 0, pretend = 0, frame = 8
 428              		@ frame_needed = 0, uses_anonymous_args = 0
 429              		.loc 1 145 1 is_stmt 0 view .LVU101
 430 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 431              	.LCFI14:
 432              		.cfi_def_cfa_offset 28
 433              		.cfi_offset 4, -28
 434              		.cfi_offset 5, -24
 435              		.cfi_offset 6, -20
 436              		.cfi_offset 7, -16
 437              		.cfi_offset 8, -12
 438              		.cfi_offset 9, -8
 439              		.cfi_offset 14, -4
 440 0004 83B0     		sub	sp, sp, #12
 441              	.LCFI15:
 442              		.cfi_def_cfa_offset 40
 146:External/flash_driver/Src/flash_driver.c ****   if (data_size == 0)
 443              		.loc 1 146 3 is_stmt 1 view .LVU102
 444              		.loc 1 146 6 is_stmt 0 view .LVU103
 445 0006 002A     		cmp	r2, #0
 446 0008 3ED0     		beq	.L21
 447 000a 0646     		mov	r6, r0
 448 000c 0F46     		mov	r7, r1
 449 000e 9046     		mov	r8, r2
 147:External/flash_driver/Src/flash_driver.c ****     return FLASH_DRIVER_INVALID_ARGS;
 148:External/flash_driver/Src/flash_driver.c ****   flash_driver_status status = flash_driver_is_busy();
 450              		.loc 1 148 3 is_stmt 1 view .LVU104
 451              		.loc 1 148 32 is_stmt 0 view .LVU105
 452 0010 FFF7FEFF 		bl	flash_driver_is_busy
ARM GAS  /tmp/ccC9jseZ.s 			page 12


 453              	.LVL45:
 149:External/flash_driver/Src/flash_driver.c ****   if (status)
 454              		.loc 1 149 3 is_stmt 1 view .LVU106
 455              		.loc 1 149 6 is_stmt 0 view .LVU107
 456 0014 0446     		mov	r4, r0
 457 0016 C0BB     		cbnz	r0, .L19
 150:External/flash_driver/Src/flash_driver.c ****     return status;
 151:External/flash_driver/Src/flash_driver.c **** 
 152:External/flash_driver/Src/flash_driver.c ****   uint8_t *output_data = malloc(4 + data_size);
 458              		.loc 1 152 3 is_stmt 1 view .LVU108
 459              		.loc 1 152 35 is_stmt 0 view .LVU109
 460 0018 08F10404 		add	r4, r8, #4
 461              		.loc 1 152 26 view .LVU110
 462 001c 2046     		mov	r0, r4
 463              	.LVL46:
 464              		.loc 1 152 26 view .LVU111
 465 001e FFF7FEFF 		bl	malloc
 466              	.LVL47:
 467 0022 0546     		mov	r5, r0
 468              	.LVL48:
 153:External/flash_driver/Src/flash_driver.c ****   uint8_t *input_data = malloc(4 + data_size);
 469              		.loc 1 153 3 is_stmt 1 view .LVU112
 470              		.loc 1 153 25 is_stmt 0 view .LVU113
 471 0024 2046     		mov	r0, r4
 472              	.LVL49:
 473              		.loc 1 153 25 view .LVU114
 474 0026 FFF7FEFF 		bl	malloc
 475              	.LVL50:
 476 002a 8146     		mov	r9, r0
 477              	.LVL51:
 154:External/flash_driver/Src/flash_driver.c **** 
 155:External/flash_driver/Src/flash_driver.c ****   output_data[0] = FLASH_DRIVER_READ_CMD;
 478              		.loc 1 155 3 is_stmt 1 view .LVU115
 479              		.loc 1 155 18 is_stmt 0 view .LVU116
 480 002c 2946     		mov	r1, r5
 481 002e 0323     		movs	r3, #3
 482 0030 01F8013B 		strb	r3, [r1], #1
 156:External/flash_driver/Src/flash_driver.c ****   uint32_t reversed_addr = flash_driver_reverse_addr(address);
 483              		.loc 1 156 3 is_stmt 1 view .LVU117
 484              	.LVL52:
 485              	.LBB14:
 486              	.LBI14:
  11:External/flash_driver/Src/flash_driver.c **** {
 487              		.loc 1 11 24 view .LVU118
 488              	.LBB15:
  13:External/flash_driver/Src/flash_driver.c ****   result |= address & 0xff00;
 489              		.loc 1 13 3 view .LVU119
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 490              		.loc 1 14 3 view .LVU120
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 491              		.loc 1 14 21 is_stmt 0 view .LVU121
 492 0034 06F47F43 		and	r3, r6, #65280
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 493              		.loc 1 14 10 view .LVU122
 494 0038 43EA0642 		orr	r2, r3, r6, lsl #16
 495              	.LVL53:
  15:External/flash_driver/Src/flash_driver.c **** 
ARM GAS  /tmp/ccC9jseZ.s 			page 13


 496              		.loc 1 15 3 is_stmt 1 view .LVU123
  15:External/flash_driver/Src/flash_driver.c **** 
 497              		.loc 1 15 34 is_stmt 0 view .LVU124
 498 003c C6F30743 		ubfx	r3, r6, #16, #8
  15:External/flash_driver/Src/flash_driver.c **** 
 499              		.loc 1 15 10 view .LVU125
 500 0040 1343     		orrs	r3, r3, r2
 501              	.LVL54:
  17:External/flash_driver/Src/flash_driver.c **** }
 502              		.loc 1 17 3 is_stmt 1 view .LVU126
  17:External/flash_driver/Src/flash_driver.c **** }
 503              		.loc 1 17 3 is_stmt 0 view .LVU127
 504              	.LBE15:
 505              	.LBE14:
 506              		.loc 1 156 12 discriminator 1 view .LVU128
 507 0042 0193     		str	r3, [sp, #4]
 157:External/flash_driver/Src/flash_driver.c ****   memcpy(output_data + 1, (uint8_t*)&reversed_addr, 3);
 508              		.loc 1 157 3 is_stmt 1 view .LVU129
 509 0044 BDF80420 		ldrh	r2, [sp, #4]	@ unaligned
 510 0048 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 511 004c A5F80120 		strh	r2, [r5, #1]	@ unaligned
 512 0050 8B70     		strb	r3, [r1, #2]
 158:External/flash_driver/Src/flash_driver.c **** 
 159:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(true);
 513              		.loc 1 159 3 view .LVU130
 514 0052 0120     		movs	r0, #1
 515              	.LVL55:
 516              		.loc 1 159 3 is_stmt 0 view .LVU131
 517 0054 FFF7FEFF 		bl	flash_driver_select
 518              	.LVL56:
 160:External/flash_driver/Src/flash_driver.c ****   status = flash_driver_io_write_read(
 519              		.loc 1 160 3 is_stmt 1 view .LVU132
 520              		.loc 1 160 12 is_stmt 0 view .LVU133
 521 0058 A2B2     		uxth	r2, r4
 522 005a 4946     		mov	r1, r9
 523 005c 2846     		mov	r0, r5
 524 005e FFF7FEFF 		bl	flash_driver_io_write_read
 525              	.LVL57:
 526 0062 0446     		mov	r4, r0
 527              	.LVL58:
 161:External/flash_driver/Src/flash_driver.c ****     output_data, input_data, 4 + data_size
 162:External/flash_driver/Src/flash_driver.c ****   );
 163:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(false);
 528              		.loc 1 163 3 is_stmt 1 view .LVU134
 529 0064 0020     		movs	r0, #0
 530 0066 FFF7FEFF 		bl	flash_driver_select
 531              	.LVL59:
 164:External/flash_driver/Src/flash_driver.c **** 
 165:External/flash_driver/Src/flash_driver.c ****   if (status == FLASH_DRIVER_OK)
 532              		.loc 1 165 3 view .LVU135
 533              		.loc 1 165 6 is_stmt 0 view .LVU136
 534 006a 34B1     		cbz	r4, .L23
 535              	.L20:
 166:External/flash_driver/Src/flash_driver.c ****     memcpy(data, input_data + 4, data_size);
 167:External/flash_driver/Src/flash_driver.c **** 
 168:External/flash_driver/Src/flash_driver.c ****   free(output_data);
 536              		.loc 1 168 3 is_stmt 1 view .LVU137
ARM GAS  /tmp/ccC9jseZ.s 			page 14


 537 006c 2846     		mov	r0, r5
 538 006e FFF7FEFF 		bl	free
 539              	.LVL60:
 169:External/flash_driver/Src/flash_driver.c ****   free(input_data);
 540              		.loc 1 169 3 view .LVU138
 541 0072 4846     		mov	r0, r9
 542 0074 FFF7FEFF 		bl	free
 543              	.LVL61:
 170:External/flash_driver/Src/flash_driver.c ****   return status;
 544              		.loc 1 170 3 view .LVU139
 545              		.loc 1 170 10 is_stmt 0 view .LVU140
 546 0078 07E0     		b	.L19
 547              	.L23:
 166:External/flash_driver/Src/flash_driver.c ****     memcpy(data, input_data + 4, data_size);
 548              		.loc 1 166 5 is_stmt 1 view .LVU141
 549 007a 4246     		mov	r2, r8
 550 007c 09F10401 		add	r1, r9, #4
 551 0080 3846     		mov	r0, r7
 552 0082 FFF7FEFF 		bl	memcpy
 553              	.LVL62:
 554 0086 F1E7     		b	.L20
 555              	.LVL63:
 556              	.L21:
 147:External/flash_driver/Src/flash_driver.c ****   flash_driver_status status = flash_driver_is_busy();
 557              		.loc 1 147 12 is_stmt 0 view .LVU142
 558 0088 0524     		movs	r4, #5
 559              	.LVL64:
 560              	.L19:
 171:External/flash_driver/Src/flash_driver.c **** }
 561              		.loc 1 171 1 view .LVU143
 562 008a 2046     		mov	r0, r4
 563 008c 03B0     		add	sp, sp, #12
 564              	.LCFI16:
 565              		.cfi_def_cfa_offset 28
 566              		@ sp needed
 567 008e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 568              		.cfi_endproc
 569              	.LFE6:
 571              		.section	.text.flash_driver_sector_erase,"ax",%progbits
 572              		.align	1
 573              		.global	flash_driver_sector_erase
 574              		.syntax unified
 575              		.thumb
 576              		.thumb_func
 578              	flash_driver_sector_erase:
 579              	.LVL65:
 580              	.LFB7:
 172:External/flash_driver/Src/flash_driver.c **** 
 173:External/flash_driver/Src/flash_driver.c **** // The Sector Erase instruction sets all memory within a specified sector
 174:External/flash_driver/Src/flash_driver.c **** // (4K-bytes) to the erased state of all 1s (FFh).
 175:External/flash_driver/Src/flash_driver.c **** // Winbond W25Q128JV datasheet (pg. 39)
 176:External/flash_driver/Src/flash_driver.c **** flash_driver_status flash_driver_sector_erase(uint32_t address)
 177:External/flash_driver/Src/flash_driver.c **** {
 581              		.loc 1 177 1 is_stmt 1 view -0
 582              		.cfi_startproc
 583              		@ args = 0, pretend = 0, frame = 8
 584              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccC9jseZ.s 			page 15


 585              		.loc 1 177 1 is_stmt 0 view .LVU145
 586 0000 30B5     		push	{r4, r5, lr}
 587              	.LCFI17:
 588              		.cfi_def_cfa_offset 12
 589              		.cfi_offset 4, -12
 590              		.cfi_offset 5, -8
 591              		.cfi_offset 14, -4
 592 0002 83B0     		sub	sp, sp, #12
 593              	.LCFI18:
 594              		.cfi_def_cfa_offset 24
 595 0004 0546     		mov	r5, r0
 178:External/flash_driver/Src/flash_driver.c ****   flash_driver_status status = flash_driver_is_busy();
 596              		.loc 1 178 3 is_stmt 1 view .LVU146
 597              		.loc 1 178 32 is_stmt 0 view .LVU147
 598 0006 FFF7FEFF 		bl	flash_driver_is_busy
 599              	.LVL66:
 600              		.loc 1 178 32 view .LVU148
 601 000a 0446     		mov	r4, r0
 602              	.LVL67:
 179:External/flash_driver/Src/flash_driver.c ****   status |= flash_driver_write_enable();
 603              		.loc 1 179 3 is_stmt 1 view .LVU149
 604              		.loc 1 179 13 is_stmt 0 view .LVU150
 605 000c FFF7FEFF 		bl	flash_driver_write_enable
 606              	.LVL68:
 607              		.loc 1 179 10 discriminator 1 view .LVU151
 608 0010 44EA0003 		orr	r3, r4, r0
 609              	.LVL69:
 180:External/flash_driver/Src/flash_driver.c ****   if (status)
 610              		.loc 1 180 3 is_stmt 1 view .LVU152
 611              		.loc 1 180 6 is_stmt 0 view .LVU153
 612 0014 13F0FF04 		ands	r4, r3, #255
 613 0018 02D0     		beq	.L27
 614              	.LVL70:
 615              	.L25:
 181:External/flash_driver/Src/flash_driver.c ****     return status;
 182:External/flash_driver/Src/flash_driver.c **** 
 183:External/flash_driver/Src/flash_driver.c ****   uint8_t output_data[4] = { FLASH_DRIVER_ERASE_SECTOR_CMD };
 184:External/flash_driver/Src/flash_driver.c ****   uint32_t reversed_addr = flash_driver_reverse_addr(address);
 185:External/flash_driver/Src/flash_driver.c ****   memcpy(output_data + 1, (uint8_t*)&reversed_addr, 3);
 186:External/flash_driver/Src/flash_driver.c **** 
 187:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(true);
 188:External/flash_driver/Src/flash_driver.c ****   status = flash_driver_io_write(
 189:External/flash_driver/Src/flash_driver.c ****     output_data, sizeof(output_data)
 190:External/flash_driver/Src/flash_driver.c ****   );
 191:External/flash_driver/Src/flash_driver.c ****   flash_driver_select(false);
 192:External/flash_driver/Src/flash_driver.c **** 
 193:External/flash_driver/Src/flash_driver.c ****   return status;
 194:External/flash_driver/Src/flash_driver.c **** }
 616              		.loc 1 194 1 view .LVU154
 617 001a 2046     		mov	r0, r4
 618 001c 03B0     		add	sp, sp, #12
 619              	.LCFI19:
 620              		.cfi_remember_state
 621              		.cfi_def_cfa_offset 12
 622              		@ sp needed
 623 001e 30BD     		pop	{r4, r5, pc}
 624              	.LVL71:
ARM GAS  /tmp/ccC9jseZ.s 			page 16


 625              	.L27:
 626              	.LCFI20:
 627              		.cfi_restore_state
 183:External/flash_driver/Src/flash_driver.c ****   uint32_t reversed_addr = flash_driver_reverse_addr(address);
 628              		.loc 1 183 3 is_stmt 1 view .LVU155
 183:External/flash_driver/Src/flash_driver.c ****   uint32_t reversed_addr = flash_driver_reverse_addr(address);
 629              		.loc 1 183 11 is_stmt 0 view .LVU156
 630 0020 2023     		movs	r3, #32
 631              	.LVL72:
 183:External/flash_driver/Src/flash_driver.c ****   uint32_t reversed_addr = flash_driver_reverse_addr(address);
 632              		.loc 1 183 11 view .LVU157
 633 0022 0193     		str	r3, [sp, #4]
 184:External/flash_driver/Src/flash_driver.c ****   memcpy(output_data + 1, (uint8_t*)&reversed_addr, 3);
 634              		.loc 1 184 3 is_stmt 1 view .LVU158
 635              	.LVL73:
 636              	.LBB16:
 637              	.LBI16:
  11:External/flash_driver/Src/flash_driver.c **** {
 638              		.loc 1 11 24 view .LVU159
 639              	.LBB17:
  13:External/flash_driver/Src/flash_driver.c ****   result |= address & 0xff00;
 640              		.loc 1 13 3 view .LVU160
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 641              		.loc 1 14 3 view .LVU161
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 642              		.loc 1 14 21 is_stmt 0 view .LVU162
 643 0024 05F47F43 		and	r3, r5, #65280
  14:External/flash_driver/Src/flash_driver.c ****   result |= (address & 0xff0000) >> 16;
 644              		.loc 1 14 10 view .LVU163
 645 0028 43EA0543 		orr	r3, r3, r5, lsl #16
 646              	.LVL74:
  15:External/flash_driver/Src/flash_driver.c **** 
 647              		.loc 1 15 3 is_stmt 1 view .LVU164
  15:External/flash_driver/Src/flash_driver.c **** 
 648              		.loc 1 15 34 is_stmt 0 view .LVU165
 649 002c C5F30745 		ubfx	r5, r5, #16, #8
 650              	.LVL75:
  15:External/flash_driver/Src/flash_driver.c **** 
 651              		.loc 1 15 10 view .LVU166
 652 0030 2B43     		orrs	r3, r3, r5
 653              	.LVL76:
  17:External/flash_driver/Src/flash_driver.c **** }
 654              		.loc 1 17 3 is_stmt 1 view .LVU167
  17:External/flash_driver/Src/flash_driver.c **** }
 655              		.loc 1 17 3 is_stmt 0 view .LVU168
 656              	.LBE17:
 657              	.LBE16:
 184:External/flash_driver/Src/flash_driver.c ****   memcpy(output_data + 1, (uint8_t*)&reversed_addr, 3);
 658              		.loc 1 184 12 discriminator 1 view .LVU169
 659 0032 0093     		str	r3, [sp]
 185:External/flash_driver/Src/flash_driver.c **** 
 660              		.loc 1 185 3 is_stmt 1 view .LVU170
 661 0034 BDF80020 		ldrh	r2, [sp]	@ unaligned
 662 0038 9DF80230 		ldrb	r3, [sp, #2]	@ zero_extendqisi2
 663 003c ADF80520 		strh	r2, [sp, #5]	@ unaligned
 664 0040 8DF80730 		strb	r3, [sp, #7]
 187:External/flash_driver/Src/flash_driver.c ****   status = flash_driver_io_write(
ARM GAS  /tmp/ccC9jseZ.s 			page 17


 665              		.loc 1 187 3 view .LVU171
 666 0044 0120     		movs	r0, #1
 667 0046 FFF7FEFF 		bl	flash_driver_select
 668              	.LVL77:
 188:External/flash_driver/Src/flash_driver.c ****     output_data, sizeof(output_data)
 669              		.loc 1 188 3 view .LVU172
 188:External/flash_driver/Src/flash_driver.c ****     output_data, sizeof(output_data)
 670              		.loc 1 188 12 is_stmt 0 view .LVU173
 671 004a 0421     		movs	r1, #4
 672 004c 0DEB0100 		add	r0, sp, r1
 673 0050 FFF7FEFF 		bl	flash_driver_io_write
 674              	.LVL78:
 675 0054 0446     		mov	r4, r0
 676              	.LVL79:
 191:External/flash_driver/Src/flash_driver.c **** 
 677              		.loc 1 191 3 is_stmt 1 view .LVU174
 678 0056 0020     		movs	r0, #0
 679 0058 FFF7FEFF 		bl	flash_driver_select
 680              	.LVL80:
 193:External/flash_driver/Src/flash_driver.c **** }
 681              		.loc 1 193 3 view .LVU175
 193:External/flash_driver/Src/flash_driver.c **** }
 682              		.loc 1 193 10 is_stmt 0 view .LVU176
 683 005c DDE7     		b	.L25
 684              		.cfi_endproc
 685              	.LFE7:
 687              		.text
 688              	.Letext0:
 689              		.file 2 "External/flash_driver/Inc/flash_driver_defs.h"
 690              		.file 3 "/usr/local/src/arm-gnu-toolchain-13.2/arm-none-eabi/include/machine/_default_types.h"
 691              		.file 4 "/usr/local/src/arm-gnu-toolchain-13.2/arm-none-eabi/include/sys/_stdint.h"
 692              		.file 5 "/usr/local/src/arm-gnu-toolchain-13.2/lib/gcc/arm-none-eabi/13.2.1/include/stddef.h"
 693              		.file 6 "External/flash_driver/Inc/flash_driver_io.h"
 694              		.file 7 "/usr/local/src/arm-gnu-toolchain-13.2/arm-none-eabi/include/string.h"
 695              		.file 8 "/usr/local/src/arm-gnu-toolchain-13.2/arm-none-eabi/include/stdlib.h"
 696              		.file 9 "<built-in>"
ARM GAS  /tmp/ccC9jseZ.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 flash_driver.c
     /tmp/ccC9jseZ.s:19     .text.flash_driver_write_enable:00000000 $t
     /tmp/ccC9jseZ.s:24     .text.flash_driver_write_enable:00000000 flash_driver_write_enable
     /tmp/ccC9jseZ.s:71     .text.flash_driver_is_busy:00000000 $t
     /tmp/ccC9jseZ.s:77     .text.flash_driver_is_busy:00000000 flash_driver_is_busy
     /tmp/ccC9jseZ.s:135    .text.flash_driver_check_link:00000000 $t
     /tmp/ccC9jseZ.s:141    .text.flash_driver_check_link:00000000 flash_driver_check_link
     /tmp/ccC9jseZ.s:234    .text.flash_driver_write:00000000 $t
     /tmp/ccC9jseZ.s:240    .text.flash_driver_write:00000000 flash_driver_write
     /tmp/ccC9jseZ.s:416    .text.flash_driver_read:00000000 $t
     /tmp/ccC9jseZ.s:422    .text.flash_driver_read:00000000 flash_driver_read
     /tmp/ccC9jseZ.s:572    .text.flash_driver_sector_erase:00000000 $t
     /tmp/ccC9jseZ.s:578    .text.flash_driver_sector_erase:00000000 flash_driver_sector_erase

UNDEFINED SYMBOLS
flash_driver_select
flash_driver_io_write
flash_driver_io_write_read
malloc
memcpy
free
